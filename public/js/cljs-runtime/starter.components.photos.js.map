{"version":3,"sources":["starter/components/photos.cljs"],"mappings":";AAQA,oCAAA,pCAAKA;AAEL,mCAAA,2CAAAC,9EAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;uBAAA,AAAAE,4CAAAF,eAAA,9EAAsBI;SAAtB,AAAAF,4CAAAF,eAAA,hEAAuCK;AAAvC,AACI,IAAMC,QAAM,gDAAA,hDAACC;IAAWC,UAAQ,gDAAA,hDAACD;AAAjC,AACI,AAEQ,AAAG,AAAO,AAAGH,8BAAgCC,SACzC,WAAKI,MAAMC,xDAWf;AAXI,AACI,AACI,yEAAA,zEAACC,mDAAML,MAAMM,4EAAe,4CAAK,AAAOF;;AACxC,yEAAA,zEAACC,mDAAML,MAAMM,oFAAmB,4CAAK,AAAOF;;AAC5C,yGAAA,zGAACG,kHAAiB,4CAAK,AAAOH;;AAC9B,yEAAA,zEAACC,mDAAML,MAAMM,qEAAY,4CAAK,AAAOF;;AACrC,yGAAA,zGAACG;;AACD,OAAGC,YAAeJ;SAK1B;AAAA,AACI,OAAG,AAAO,AAAGN,kCAAoC,AAAA,mFAAA,AAAAW,gBAAQT,cACrD,WAAKG,MAAMC;AAAX,AACI,AACI,2EAAA,3EAACC,mDAAMH,QAAQI,qEAAY,4CAAK,AAAOF;;AACvC,2EAAA,3EAACC,mDAAMH,QAAQI,2EAAe,4CAAK,AAAOF;;AAC1C,yGAAA,zGAACG;;AACD,OAAGC,YAAeJ;;;;AAO1C;AAAA,AACI,AACA,CAAM,AAAIM,cAAiB,qBAAA,AAAAD,rBAACE,qCAASX;;AADrC,uHAAA,2CAAA,iDAAA,wCAAA,mEAAA,4EAAA,uDAAA,0DAAA,sEAAA,QAAA,wEAAA,yDAAA,2DAAA,SAAA,QAAA,QAAA,OAAA,OAAA,2CAAA,yDAAA,cAAA,SAAA,QAAA,mBAAA,gHAAA,2CAAA,iDAAA,2CAAA,0DAAA,OAAA,mEAAA,SAAA,uDAAA,OAAA,MAAA,2CAAA,yDAAA,gCAAA,mFAAA,mDAAA,2CAAA,iQAAA,uDAAA,KAAA,yDAAA,KAAA,uDAAA,2CAAA,sEAAA,8BAAA,8HAAA,2CAAA,2DAAA,KAAA,+DAAA,MAAA,iDAAA,2CAAA,gEAAA,oJAAA,gHAAA,2CAAA,iDAAA,2CAAA,uDAAA,OAAA,4EAAA,UAAA,yDAAA,sBAAA,mFAAA,mDAAA,2CAAA,gQAAA,uDAAA,2CAAA,uDAAA,OAAA,yDAAA,OAAA,iEAAA,0CAAA,8HAAA,2CAAA,2DAAA,KAAA,+DAAA,MAAA,iDAAA,2CAAA,gEAAA,OAAA,mEAAA,9+IAECY,27BAUIA,8tBAWgB,CAAKpB,8EAAQ,AAAA,yFAAA,AAAAiB,gBAAWP,waAMpCW,8YAQG,AAAA,mFAAA,AAAAJ,gBAAQP,6GAGfU,4mBAUgB,CAAKpB,8EAAQ,AAAA,0FAAA,AAAAiB,gBAAWT,ibASxCa,4dASG,AAAA,kGAAA,AAAAJ,gBAAeT","names":["starter.components.photos/ipfsUrl","p__28369","map__28370","cljs.core/--destructure-map","cljs.core.get","starter.components.photos/photos","contractInstance","id","photo","reagent.core.atom","creator","error","result","cljs.core.swap_BANG_","cljs.core/assoc","cljs.core.println","js/console","cljs.core/deref","js/window","cljs.core/clj->js","reagent-mui.material.box/box","reagent-mui.material.typography/typography"],"sourcesContent":["(ns starter.components.photos\n    (:require\n        [reagent.core :as r]\n        [reagent-mui.material.box :refer [box]]\n        [reagent-mui.material.typography :refer [typography]]\n    )\n)\n\n(def ipfsUrl \"https://ipfs.infura.io/ipfs/\")\n\n(defn photos [{:keys [contractInstance id]}]\n    (let [photo (r/atom {}) creator (r/atom {})]\n        (do\n            (->\n                (. ^js (. (. contractInstance -methods) pics id) call \n                    (fn [error result] \n                        (do \n                            (swap! photo assoc :picHash (str ^js (. result -picHash)))\n                            (swap! photo assoc :description (str ^js (. result -description)))\n                            (println \"user: \" (str ^js (. result -user)))\n                            (swap! photo assoc :user (str ^js (. result -user)))\n                            (println \"photo\")\n                            (. js/console log result)\n                        )\n                    )\n                )\n                (.then \n                    (fn [] \n                        (. ^js (. (. contractInstance -methods) profiles (:user @photo)) call\n                            (fn [error result] \n                                (do \n                                    (swap! creator assoc :name (str ^js (. result -name)))\n                                    (swap! creator assoc :profile (str ^js (. result -picHash)))\n                                    (println \"creator\")\n                                    (. js/console log result)\n                                )\n                            )\n                        )\n                    )\n                )\n            )\n            (fn []\n                (do\n                (set! (.. js/window -tamp) (clj->js @photo))\n                [box\n                    {:sx {:width \"600px\"\n                        :height \"800px\" \n                        :background-color \"white\" \n                        :border-radius \"25px\"\n                        :display \"flex\"\n                        :flex-direction \"column\"\n                        :align-items \"center\"\n                        :margin \"20px 0\"\n                        \"&>div\" {:margin \"2px\"}}}\n                    [box\n                        {\n                            :sx {\n                                :display \"flex\"\n                                :align-items \"center\"\n                                :width \"100%\"\n                                \"&>*\" {:margin \"0 5px\"}\n                            }\n                        }\n                        [:img\n                            {\n                                :src (str ipfsUrl (:profile @creator))\n                                :width 50\n                                :height 50\n                                :style {:border-radius \"50%\"}\n                            }\n                        ]\n                        [typography\n                            {:variant \"h6\"\n                            :component \"div\"\n                            :sx \n                                {\n                                    :font-size \"17px\"\n                                }\n                            }\n                            (:name @creator)\n                        ]\n                    ]\n                    [box\n                        {:sx \n                            {\n                                :width \"100%\"\n                                :background-color \"#404040\"\n                                :height \"90%\"\n                            }\n                        }\n                        [:img\n                            {\n                                :src (str ipfsUrl (:picHash @photo))\n                                :style {\n                                    :width \"100%\"\n                                    :height \"100%\"\n                                    :object-fit \"contain\"\n                                }\n                            }\n                        ]\n                    ]\n                    [typography\n                        {:variant \"h6\"\n                        :component \"div\"\n                        :sx \n                            {\n                                :font-size \"17px\"\n                                :white-space \"pre-line\"\n                            }\n                        }\n                        (:description @photo)\n                    ]\n                ]\n                )\n            )\n        )\n    )\n)"]}