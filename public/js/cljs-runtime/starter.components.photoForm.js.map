{"version":3,"sources":["starter/components/photoForm.cljs"],"mappings":"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","names":["starter.components.photoForm/emptyDescription","description","cljs.core._EQ_","cljs.core/deref","cljs.core/count","starter.components.photoForm/emptyPhoto","photo","starter.components.photoForm/photoForm","open","reagent.core.atom","error","cljs_ipfs_api.core.init_ipfs","p1__26980#","reagent-mui.material.modal/modal","cljs.core/reset!","reagent-mui.material.box/box","reagent-mui.material.typography/typography","uploaded","js/window","reagent-mui.material.icon-button/icon-button","reagent-mui.icons.add-a-photo-sharp/add-a-photo-sharp","reagent-mui.material.text-field/text-field","e","reagent-mui.material.button/button","cljs_ipfs_api.files.add","err","files","cljs.core.println"],"sourcesContent":["(ns starter.components.photoForm\n  (:require\n    [reagent.core :as r]\n    [reagent-mui.material.modal :refer [modal]]\n    [reagent-mui.material.alert :refer [alert]]\n    [reagent-mui.material.box :refer [box]]\n    [reagent-mui.material.typography :refer [typography]]\n    [reagent-mui.material.button :refer [button]]\n    [reagent-mui.material.icon-button :refer [icon-button]]\n    [reagent-mui.icons.add-a-photo-sharp :refer [add-a-photo-sharp]]\n    [reagent-mui.material.text-field :refer [text-field]]\n    [starter.components.errorMessage :refer [errorMessage]]\n    [cljs-ipfs-api.core :as icore :refer [init-ipfs]]\n    [cljs-ipfs-api.files :as ifiles]\n))\n\n(defn emptyDescription [description]\n  (= (count @description) 0)\n)\n\n(defn emptyPhoto [photo]\n  (nil? @photo)\n)\n\n(defn photoForm [open] \n  (let [photo (r/atom nil) description (r/atom nil) error (r/atom nil)]\n    (do\n      (init-ipfs {:host \"https://ipfs.infura.io:5001\"})\n      (fn []\n        [:<>\n          [modal\n            {:open @open\n              :on-close #(do (reset! photo nil) (reset! description nil) (reset! open false))}\n            [box \n              {:sx {:box-shadow \"20\" \n                    :background-color \"#CAF0F8\"\n                    :padding \"30px\"\n                    :height \"350px\"\n                    :width \"400px\"\n                    :position \"absolute\"\n                    :top \"50%\"\n                    :left \"50%\"\n                    :transform \"translate(-50%, -50%)\"\n                    :border \"5px solid #5F939A\"\n                    :display \"flex\"\n                    :flex-direction \"column\"\n                    :align-items \"center\"}}\n              [typography\n                {:variant \"h6\"\n                  :component \"div\"\n                  :sx {:color \"#070707\"\n                        :font-weight \"100\"}}\n                \"Step 1: upload a photo\"]\n              [:hr\n                {:style {:width \"50%\"}}]\n              [:div\n                {:style {:display \"flex\"\n                          :flex-direction \"column\"\n                          :align-items \"center\"}}\n                [:label \n                  {:html-for \"upload-image\"}\n                  [:input \n                    {:accept \"image/*\"\n                      :id \"upload-image\"\n                      :type \"file\"\n                      :style {:display \"none\"}\n                      :on-change #(let [uploaded (-> % .-target .-files (aget 0))] (do (reset! photo uploaded) (set! (. js/window -temp) @photo)))}]\n                  [icon-button \n                    {:component \"span\"}\n                    [add-a-photo-sharp]]]\n                [typography\n                  {:variant \"h6\"\n                    :component \"div\"\n                    :sx {:color (if (emptyPhoto photo)  \"#d32f2f\" \"#070707\")\n                          :font-size \"12px\"\n                          :font-weight \"500\"}}\n                  (if (emptyPhoto photo) \"no photo uploaded\" (.-name @photo))]\n              ]\n              [:div \n                {:style {:margin \"10px\"}}]\n              [typography\n                {:variant \"h6\"\n                  :component \"div\"\n                  :sx {:color \"#070707\"\n                        :font-weight \"100\"}}\n                \"Step 2: add a decription to your photo\"]\n              [:hr\n                {:style {:margin \"10px\"\n                          :width \"50%\"}}]\n              [:div\n                {:style {:height \"120px\"}}\n              [text-field\n                {:multiline true \n                  :rows 2\n                  :error (emptyDescription description)\n                  :helper-text (when (emptyDescription description) \"description cannot be empty\")\n                  :value @description\n                  :on-change (fn [e] (reset! description (.. e -target -value)))}]\n              ]\n              [:div \n                {:style {:margin \"10px\"}}]\n              [button \n                {:variant \"contained\"\n                  :disabled (true? (or (emptyDescription description) (emptyPhoto photo)))\n                  :disable-elevation true\n                  :on-click #(ifiles/add @photo (fn [err files] (if err (println (str \"err: \" err)) (println (str \"file: \" files)))))}\n                \"Submit\"]\n            ]\n          ]\n        ]\n      )\n    )\n  )\n)"]}